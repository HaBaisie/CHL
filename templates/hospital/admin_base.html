<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}HMS - Admin{% endblock %} | CHL Hospital</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome 6 -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <!-- Custom Styles -->
  <link rel="stylesheet" href="{% static 'style.css' %}">

  <style>
    /* Sidebar Menu */
    body { padding-left: 240px; font-family: 'Segoe UI', sans-serif; }
    .menu {
      background: #03a9f4;
      height: 100vh;
      width: 240px;
      position: fixed;
      top: 0; left: 0;
      z-index: 1000;
      overflow-y: auto;
      transition: all 0.3s;
    }
    .menu .avatar {
      background: rgba(0,0,0,0.1);
      padding: 2rem 0.5rem;
      text-align: center;
    }
    .menu .avatar img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 4px solid #ffea92;
      box-shadow: 0 0 0 4px rgba(255,255,255,0.2);
      object-fit: cover;
    }
    .menu .avatar h2 { font-weight: 500; margin: 0.5rem 0 0; color: white; }
    .menu .avatar h6 { color: #fff; opacity: 0.9; }

    .menu ul { list-style: none; padding: 0; margin: 0; }
    .menu ul li {
      padding: 0.75rem 1rem 0.75rem 3rem;
      font-size: 0.95rem;
      color: white;
      background-repeat: no-repeat;
      background-position: left 15px center;
      background-size: auto 20px;
      transition: background 0.2s;
    }
    .menu ul li a { color: white; text-decoration: none; display: block; }
    .menu ul li:hover { background-color: rgba(0,0,0,0.1); }

    .icon-dashboard { background-image: url("{% static 'icons/gauge.svg' %}"); }
    .icon-customers { background-image: url("{% static 'icons/briefcase.svg' %}"); }
    .icon-users { background-image: url("{% static 'icons/users.svg' %}"); }
    .icon-calendar { background-image: url("{% static 'icons/calendar.svg' %}"); }

    /* Mobile Menu */
    @media (max-width: 992px) {
      body { padding-left: 0; }
      .menu { transform: translateX(-100%); }
      .menu.active { transform: translateX(0); }
      .menu-toggle { display: block; }
    }
    .menu-toggle {
      display: none;
      position: fixed;
      top: 1rem;
      left: 1rem;
      z-index: 1100;
      background: #03a9f4;
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      font-size: 1.2rem;
    }

    /* Footer */
    footer {
      background: #000;
      color: white;
      padding: 2rem 0;
      margin-top: 3rem;
    }
    .social-icons a {
      display: inline-block;
      width: 40px; height: 40px;
      background: #333;
      color: white;
      text-align: center;
      line-height: 40px;
      border-radius: 50%;
      margin: 0 5px;
      transition: 0.3s;
    }
    .social-icons a:hover { opacity: 0.7; }

    /* Fix navbar overlap */
    .content-wrapper { padding-top: 70px; }
  </style>

  {% block extra_css %}{% endblock %}
</head>

<body>
  <!-- Mobile Menu Toggle -->
  <button class="menu-toggle d-lg-none">
    Menu
  </button>

  <!-- Sidebar Menu -->
  <nav class="menu" id="sidebar">
    <div class="smartphone-menu-trigger"></div>
    <header class="avatar">
      <img src="{% static 'images/adminpropic.png' %}" alt="Admin">
      <h6>Admin</h6>
      <h2>{{ request.user.get_full_name|default:request.user.username }}</h2>
    </header>
    <ul>
      <li class="icon-dashboard"><a href="{% url 'admin-dashboard' %}">Dashboard</a></li>
      <li class="icon-customers"><a href="{% url 'admin-doctor' %}">Doctor</a></li>
      <li class="icon-users"><a href="{% url 'admin-patient' %}">Patient</a></li>
      <li class="icon-calendar"><a href="{% url 'admin-appointment' %}">Appointment</a></li>
    </ul>
  </nav>

  <!-- Main Content -->
  <main class="content-wrapper">
    <!-- Top Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" style="background:#337AB7;">
      <div class="container-fluid">
        <a href="{% url 'admin-dashboard' %}" class="navbar-brand">CHL HOSPITAL</a>
        <div class="ms-auto">
          <form method="post" action="{% url 'logout' %}" class="d-inline">
            {% csrf_token %}
            <button type="submit" class="btn btn-outline-light btn-sm">Logout</button>
          </form>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <div class="container-fluid mt-4">
      {% block content %}
      {% endblock %}
    </div>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-12 text-center">
            <div class="social-icons mb-3">
              <a href="#" class="facebook"><i class="fab fa-facebook-f"></i></a>
              <a href="#" class="whatsapp"><i class="fab fa-whatsapp"></i></a>
              <a href="#" class="twitter"><i class="fab fa-twitter"></i></a>
              <a href="#" class="instagram"><i class="fab fa-instagram"></i></a>
            </div>
            <p class="mb-0">Copyright Â© 2021 Developed By BaisieTech</p>
          </div>
        </div>
      </div>
    </footer>
  </main>

  <!-- Bootstrap 5 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Mobile Menu Toggle Script -->
  <script>
    document.querySelector('.menu-toggle').addEventListener('click', function() {
      document.getElementById('sidebar').classList.toggle('active');
    });
  </script>

  <!-- Live Search Script (for all patient tables) -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const input = document.querySelector('input[name="q"]');
      if (!input) return;

      const rows = document.querySelectorAll('table tbody tr');
      const listItems = document.querySelectorAll('.list-group-item');

      input.addEventListener('input', function () {
        const term = this.value.trim().toLowerCase();

        // For tables
        rows.forEach(row => {
          const text = row.textContent.toLowerCase();
          row.style.display = text.includes(term) ? '' : 'none';
        });

        // For list groups (like Lab Dashboard)
        listItems.forEach(item => {
          const text = item.textContent.toLowerCase();
          item.style.display = text.includes(term) ? '' : 'none';
        });
      });
    });
  </script>

  {% block extra_js %}{% endblock %}
</body>
</html>